<h1>
    {{project?.title}} - Groups
    <button (click)="createGroup()" class="btn btn-primary" type="button">Create Group</button>
</h1>
<p *ngIf="errorMessage != null">{{errorMessage}}</p>

<table>
<thead><tr>
    <td>Group name</td>
    <td>Applications</td>
    <td>Actions</td>
</tr></thead>
<tbody>
    <tr *ngFor="let group of groups" class="group" (click)="onClickGroup(group)">
        <td class="title">{{group.title}}
            <a *ngIf="!group.readOnly" href="#" (click)="editGroup(group, $event)">
                <span class="glyphicon glyphicon-pencil"></span>
            </a>
        </td>
        <td class="apps">
            <span *ngFor="let app of group.applications">
                <span>{{app.title}}</span>,
                    <!--
                    <a *ngIf="app.reportIndexPath != null" target="_blank" href="{{reportURL(app)}}">
                        <span class="glyphicon glyphicon-file"></span>
                    </a>
                    <button class="btn btn-default" (click)="editApplication(app)"> Edit </button>
                    <button class="btn btn-danger" (click)="deleteApplication(app)">
                        {{app.registrationType == "UPLOADED" ? "Delete" : "Remove"}}
                    </button>
                    -->
            </span>
        </td>
        <td class="actions">
            <a [routerLink]="['/analysis-context-form', { groupID: group.id }]">Edit Analysis Configuration</a>
            <span *ngIf="groupReportURL(group) != null">
                |
                <a target="_blank" href="{{groupReportURL(group)}}">
                    View Report
                </a>
            </span>
            <span *ngIf="group.applications.length > 0">
                |
                <a (click)="runWindup($event, group)" href="#">Run Windup</a>
            </span>
            <div>
                <div *ngIf="status(group).state == 'STARTED'">
                    <progress-bar
                            [taskName]="status(group).currentTask"
                            [currentValue]="status(group).workCompleted"
                            [minValue]="0"
                            [maxValue]="status(group).totalWork"></progress-bar>
                </div>
            </div>
        </td>
    </tr>

    groupSelected: {{groupSelected}}
    <!--
    <wu-group *ngIf="groupSelected" [group]="groupSelected">
    </wu-group>
    -->
</tbody>
</table>
